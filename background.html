<script>
chrome.contextMenus.create({
  "title": "Open in new tab",
  "onclick": function(clickData) { openFrame(clickData, "tab") }
});

chrome.contextMenus.create({
  "title": "Open in new window",
  "onclick": function(clickData) { openFrame(clickData, "window") }
});

chrome.contextMenus.create({
  "title": "Open in incognito window",
  "onclick": function(clickData) { openFrame(clickData, "incognito") }
});

function openFrame(clickData, container) {
  var url = clickData.frameUrl || clickData.pageUrl;

  if (container == "tab")
    chrome.tabs.create({url:url});
  else if (container == "window")
    chrome.windows.create({url:url});
  else if (container == "incognito")
    chrome.windows.create({url:url, incognito:true});
}
</script>
